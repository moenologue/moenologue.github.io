"use strict";(self["webpackChunkcendana_web"]=self["webpackChunkcendana_web"]||[]).push([[273],{7273:(e,a,l)=>{l.r(a),l.d(a,{default:()=>I});var r=l(3673),o=l(2323);const t={class:"row flex-center q-my-xl"},u={class:"col-md-6 col-xs-12"};function n(e,a,l,n,d,i){const c=(0,r.up)("q-toolbar-title"),s=(0,r.up)("q-toolbar"),m=(0,r.up)("product-search-input"),p=(0,r.up)("rupiah-input"),b=(0,r.up)("q-input"),f=(0,r.up)("q-form"),y=(0,r.up)("q-card-section"),g=(0,r.up)("q-btn"),h=(0,r.up)("q-card-actions"),w=(0,r.up)("q-card"),q=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(q,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{class:"q-px-lg bg-grey-2"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{class:"text-weight-bold"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Tambah Item Pembelian #"+(0,o.zw)(e.order),1)])),_:1})])),_:1}),(0,r.Wm)("div",t,[(0,r.Wm)("div",u,[(0,r.Wm)(w,{class:"rounded-borders"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,{ref:"form"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{modelValue:e.payload.product,"onUpdate:modelValue":a[1]||(a[1]=a=>e.payload.product=a),rules:[e=>!!e||"Produk Harus Diisi"]},null,8,["modelValue","rules"]),(0,r.Wm)(p,{label:"Harga Beli",modelValue:e.payload.buyPrice,"onUpdate:modelValue":a[2]||(a[2]=a=>e.payload.buyPrice=a),rules:[e=>!!e||"Harga Beli Harus Diisi",e.decimalGreaterThanZero]},null,8,["modelValue","rules"]),(0,r.Wm)(p,{label:"Harga Jual",modelValue:e.payload.sellPrice,"onUpdate:modelValue":a[3]||(a[3]=a=>e.payload.sellPrice=a),rules:[e=>!!e||"Harga Jual Harus Diisi",e.decimalGreaterThanZero]},null,8,["modelValue","rules"]),(0,r.Wm)(b,{filled:"",class:"q-mb-md",label:"Jumlah Item Baik",modelValue:e.payload.available,"onUpdate:modelValue":a[4]||(a[4]=a=>e.payload.available=a),modelModifiers:{number:!0},type:"number",rules:[e=>!!e||"Jumlah Item Baik Harus Diisi"]},null,8,["modelValue","rules"]),(0,r.Wm)(b,{filled:"",class:"q-mb-md",label:"Jumlah Item Rusak",modelValue:e.payload.defect,"onUpdate:modelValue":a[5]||(a[5]=a=>e.payload.defect=a),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"]),(0,r.Wm)(b,{filled:"",class:"q-mb-md",label:"Diskon",type:"number",min:"0",max:"100",modelValue:e.payload.discount,"onUpdate:modelValue":a[6]||(a[6]=a=>e.payload.discount=a),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},512)])),_:1}),(0,r.Wm)(h,{align:"center"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{onClick:e.onSubmit,loading:"loading"==e.result.type,square:"",dark:"",color:"primary",label:"simpan"},null,8,["onClick","loading"])])),_:1})])),_:1})])])])),_:1})}var d=l(1959),i=l(7763),c=l(3358),s=l(3385),m=l(6956),p=l(3529),b=function(e,a,l,r){function o(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,t){function u(e){try{d(r.next(e))}catch(a){t(a)}}function n(e){try{d(r["throw"](e))}catch(a){t(a)}}function d(e){e.done?l(e.value):o(e.value).then(u,n)}d((r=r.apply(e,a||[])).next())}))},f=function(e,a){var l={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&a.indexOf(r)<0&&(l[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(l[r[o]]=e[r[o]])}return l};const y=(0,r.aZ)({components:{LoadingPane:i.Z,ProductSearchInput:c.Z,RupiahInput:s.Z},props:{order:{type:String,required:!0}},setup(e){const{result:a,parameters:l,getProducts:o}=(0,p.QQ)(),t=(0,r.Fl)((()=>a.value.items)),u=(e,a)=>{l.keyword=e},n=(0,d.iH)(),i=(0,d.qj)({orderId:0,product:{},buyPrice:"0",sellPrice:"0",quantity:0,available:0,defect:0}),c=e=>{const a=parseFloat(e);return a>0||"Harga harus lebih besar dari 0"},{result:s,create:y}=(0,m.R)(),g=()=>b(this,void 0,void 0,(function*(){const a=(0,d.SU)(n),l=yield a.validate(!0);if(!l)return;const{product:r}=i,o=f(i,["product"]),t=o.available+o.defect,u=Object.assign(Object.assign({},o),{productId:i.product.id,orderId:e.order,quantity:t});try{yield y(u)}catch(c){console.log(c)}}));return{value:"OK",payload:i,onFilterProducts:u,productOptions:t,decimalGreaterThanZero:c,form:n,onSubmit:g,result:s}}});var g=l(4379),h=l(9570),w=l(3747),q=l(151),v=l(5589),V=l(5269),P=l(4842),Z=l(9367),W=l(2165),k=l(7518),O=l.n(k);y.render=n;const I=y;O()(y,"components",{QPage:g.Z,QToolbar:h.Z,QToolbarTitle:w.Z,QCard:q.Z,QCardSection:v.Z,QForm:V.Z,QInput:P.Z,QCardActions:Z.Z,QBtn:W.Z})}}]);