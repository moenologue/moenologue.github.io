"use strict";(self["webpackChunkcendana_web"]=self["webpackChunkcendana_web"]||[]).push([[313],{1313:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var o=a(3673);const l=(0,o.Uk)(" Update Data Produk "),n={class:"row flex-center q-my-xl"},u={class:"col-md-6 col-xs-12"},r={class:"q-ma-md"};function i(e,t,a,i,d,c){const s=(0,o.up)("q-toolbar-title"),p=(0,o.up)("q-toolbar"),m=(0,o.up)("q-input"),g=(0,o.up)("rupiah-input"),f=(0,o.up)("options-product-category"),y=(0,o.up)("q-form"),v=(0,o.up)("q-card-section"),b=(0,o.up)("q-separator"),w=(0,o.up)("q-btn"),k=(0,o.up)("q-card"),q=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"text-grey-8 bg-grey-2 q-px-lg"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"text-weight-bold"},{default:(0,o.w5)((()=>[l])),_:1})])),_:1}),(0,o.Wm)("div",n,[(0,o.Wm)("div",u,[(0,o.Wm)(k,{class:"rounded-borders",flat:"",bordered:""},{default:(0,o.w5)((()=>["loading"!=e.initialData.type?((0,o.wg)(),(0,o.j4)(v,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{ref:"form"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{label:"Nama Produk",modelValue:e.payload.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.payload.name=t),class:"q-mb-md",outlined:""},null,8,["modelValue"]),(0,o.Wm)(m,{label:"Unit Produk",modelValue:e.payload.unit,"onUpdate:modelValue":t[2]||(t[2]=t=>e.payload.unit=t),class:"q-mb-md",outlined:""},null,8,["modelValue"]),(0,o.Wm)(g,{label:"Harga Jual",modelValue:e.payload.sellPrice,"onUpdate:modelValue":t[3]||(t[3]=t=>e.payload.sellPrice=t)},null,8,["modelValue"]),(0,o.Wm)(f,{modelValue:e.payload.categories,"onUpdate:modelValue":t[4]||(t[4]=t=>e.payload.categories=t)},null,8,["modelValue"])])),_:1},512)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(b),(0,o.Wm)("div",r,[(0,o.Wm)(w,{onClick:e.onSubmit,loading:"loading"==e.updateResult.type,color:"blue",dark:"",label:"simpan",unelevated:""},null,8,["onClick","loading"])])])),_:1})])])])),_:1})}var d=a(1959),c=a(4964);function s(e,t,a,l,n,u){const r=(0,o.up)("q-skeleton"),i=(0,o.up)("q-select");return"loading"==e.productCategories.type?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"q-my-md",type:"rect"})):((0,o.wg)(),(0,o.j4)(i,{key:1,label:"Kategori Produk",modelValue:e.model,"onUpdate:modelValue":t[1]||(t[1]=t=>e.model=t),multiple:"","option-label":"title","option-value":"id",outlined:"",options:e.productCategories.items},null,8,["modelValue","options"]))}var p=a(1768),m=a(8825),g=function(e,t,a,o){function l(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function u(e){try{i(o.next(e))}catch(t){n(t)}}function r(e){try{i(o["throw"](e))}catch(t){n(t)}}function i(e){e.done?a(e.value):l(e.value).then(u,r)}i((o=o.apply(e,t||[])).next())}))};function f(){const e=(0,d.qj)({keyword:"",page:0,perPage:10}),t=(0,d.iH)({type:"data",totalData:0,totalPage:0,items:[]}),a=(0,m.Z)(),l=()=>g(this,void 0,void 0,(function*(){t.value={type:"loading"};try{const a=yield p.api.get("/v1/api/product-categories",{params:Object.assign({},e)});t.value=Object.assign({type:"data"},a.data)}catch(o){console.log(o),t.value={type:"fail",error:o},a.notify({type:"negative",message:"Gagal mengambil data Kategori Produk"})}return t.value}));return(0,o.YP)(e,l),{result:t,params:e,getProductCategories:l}}const y=(0,o.aZ)({props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const{result:a,params:l,getProductCategories:n}=f(),u=(0,o.Fl)({set:e=>{t("update:modelValue",e.map((e=>Object.assign({},e))))},get:()=>e.modelValue});return(0,o.bv)((()=>{n()})),{productCategories:a,model:u}}});var v=a(4103),b=a(3314),w=a(7518),k=a.n(w);y.render=s;const q=y;k()(y,"components",{QSkeleton:v.ZP,QSelect:b.Z});var P=a(3385),h=a(9582),V=function(e,t,a,o){function l(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function u(e){try{i(o.next(e))}catch(t){n(t)}}function r(e){try{i(o["throw"](e))}catch(t){n(t)}}function i(e){e.done?a(e.value):l(e.value).then(u,r)}i((o=o.apply(e,t||[])).next())}))};const Z=(0,o.aZ)({props:{id:{type:String,required:!0}},components:{OptionsProductCategory:q,RupiahInput:P.Z},setup(e){const{id:t}=(0,d.BK)(e),a=(0,d.qj)({name:"",unit:"",categories:[],sellPrice:"",defect:0}),l=(0,o.Fl)((()=>{const e=t.value;return e?`/v1/api/products/${t.value}`:""})),{getSingleEntity:n,result:u}=(0,c.pk)("Produk");(0,o.bv)((()=>V(this,void 0,void 0,(function*(){const e=yield n(l.value);a.name=e.name,a.unit=e.unit,a.sellPrice=e.sellPrice,a.categories=e.categories,a.defect=e.defect}))));const{result:r,updateEntity:i}=(0,c.oN)("Produk"),s=(0,h.tv)(),p=(0,d.iH)(null),m=()=>V(this,void 0,void 0,(function*(){const e=p.value;if(!e)throw new Error("form is undefind");const o=yield e.validate(!0);if(!o)return;const l=`/v1/api/products/${t.value}`;yield i(l,Object.assign({},a)),s.back()}));return{payload:a,initialData:u,form:p,onSubmit:m,updateResult:r}}});var W=a(4379),C=a(9570),j=a(3747),Q=a(151),x=a(5589),S=a(5269),U=a(4842),_=a(5869),O=a(2165);Z.render=i;const D=Z;k()(Z,"components",{QPage:W.Z,QToolbar:C.Z,QToolbarTitle:j.Z,QCard:Q.Z,QCardSection:x.Z,QForm:S.Z,QInput:U.Z,QSeparator:_.Z,QBtn:O.Z})}}]);