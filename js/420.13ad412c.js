"use strict";(self["webpackChunkcendana_web"]=self["webpackChunkcendana_web"]||[]).push([[420],{7420:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ua});var l=t(3673);const n={class:"q-pa-md"},o={key:0,class:"row q-mb-xl q-col-gutter-md"},u={class:"col-12 col-md-4"},r=(0,l.Wm)("div",{class:"text-subtitle1 text-weight-bold"},"Informasi Pembelian",-1),d={key:0,class:"col-12 col-md-4"},i=(0,l.Wm)("div",{class:"text-subtitle1 text-weight-bold"},"Informasi Transaksi",-1),s={key:1,class:"col-12 col-md-4"},p=(0,l.Wm)("div",{class:"text-subtitle1 text-weight-bold"},"Informasi Hutang",-1),m={class:"row q-mb-xl"},c={class:"col-12"};function f(e,a,t,f,y,g){const h=(0,l.up)("btn-actions"),w=(0,l.up)("page-toolbar"),b=(0,l.up)("q-toolbar"),W=(0,l.up)("q-separator"),v=(0,l.up)("purchase-card-info"),k=(0,l.up)("q-card"),q=(0,l.up)("transaction-flash"),_=(0,l.up)("delay-flash"),I=(0,l.up)("stock-items"),Z=(0,l.up)("purchase-seal"),U=(0,l.up)("q-dialog"),P=(0,l.up)("purchase-update"),S=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{title:`Detail Pembelian #${e.orderId}`},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{open:e.open,onShowSeal:a[1]||(a[1]=a=>e.showSealDialog=!0),onShowUpdate:a[2]||(a[2]=a=>e.showUpdateDialog=!0)},null,8,["open"])])),_:1},8,["title"]),(0,l.Wm)("div",n,["data"==e.purchase.type?((0,l.wg)(),(0,l.j4)("div",o,[(0,l.Wm)("div",u,[(0,l.Wm)(k,{flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[r])),_:1}),(0,l.Wm)(W),(0,l.Wm)(v,{purchase:e.purchase.item},null,8,["purchase"])])),_:1})]),e.purchase.item.transaction?((0,l.wg)(),(0,l.j4)("div",d,[(0,l.Wm)(k,{flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[i])),_:1}),(0,l.Wm)(W),(0,l.Wm)(q,{transaction:e.purchase.item.transaction},null,8,["transaction"])])),_:1})])):(0,l.kq)("",!0),e.purchase.item.delay?((0,l.wg)(),(0,l.j4)("div",s,[(0,l.Wm)(k,{flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(W),(0,l.Wm)(_,{delay:e.purchase.item.delay},null,8,["delay"])])),_:1})])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l.Wm)("div",m,[(0,l.Wm)("div",c,[(0,l.Wm)(I,{onItemAdded:e.getPurchase,onItemDeleted:e.getPurchase,"order-id":e.orderId,open:e.open},null,8,["onItemAdded","onItemDeleted","order-id","open"])])])]),(0,l.Wm)(U,{modelValue:e.showSealDialog,"onUpdate:modelValue":a[3]||(a[3]=a=>e.showSealDialog=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{onPurchaseSealed:e.getPurchase},null,8,["onPurchaseSealed"])])),_:1},8,["modelValue"]),(0,l.Wm)(U,{modelValue:e.showUpdateDialog,"onUpdate:modelValue":a[4]||(a[4]=a=>e.showUpdateDialog=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{"order-id":e.orderId,onPurchaseUpdated:e.getPurchase},null,8,["order-id","onPurchaseUpdated"])])),_:1},8,["modelValue"])])),_:1})}var y=t(1959);function g(e,a,t,n,o,u){const r=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.j4)(l.HY,null,[e.open?((0,l.wg)(),(0,l.j4)(r,{key:0,onClick:a[1]||(a[1]=a=>e.$emit("show-seal")),label:"Kunci Pembelian",outline:"",class:"q-mr-md"})):(0,l.kq)("",!0),e.open?((0,l.wg)(),(0,l.j4)(r,{key:1,onClick:a[2]||(a[2]=a=>e.$emit("show-update")),label:"edit data pembelian",outline:"",icon:"edit"})):(0,l.kq)("",!0)],64)}const h=(0,l.aZ)({props:{open:{type:Boolean,required:!0}}});var w=t(2165),b=t(7518),W=t.n(b);h.render=g;const v=h;W()(h,"components",{QBtn:w.Z});var k=t(1036),q=t(2323);const _=(0,l.Uk)(" Supplier "),I=(0,l.Uk)(" Admin "),Z=(0,l.Uk)(" Waktu "),U=(0,l.Uk)(" Status Pembelian "),P=(0,l.Uk)(" Pajak "),S=(0,l.Uk)(" Biaya Pengiriman "),V=(0,l.Uk)(" Total "),D=(0,l.Uk)(" Grand Total ");function j(e,a,t,n,o,u){const r=(0,l.up)("q-item-section"),d=(0,l.up)("router-link"),i=(0,l.up)("q-item"),s=(0,l.up)("order-status-chip"),p=(0,l.up)("q-list");return(0,l.wg)(),(0,l.j4)(p,{separator:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[_])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{to:"/app"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,q.zw)(e.purchase.targetUser.name),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[I])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{to:"/app"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,q.zw)(e.purchase.author.name),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Z])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,q.zw)(e.displayDateTime(e.purchase.createdAt)),1)])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[U])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)("div",null,[(0,l.Wm)(s,{status:e.purchase.orderStatus},null,8,["status"])])])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[P])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,q.zw)(e.purchase.tax)+" % ",1)])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[S])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Rp, "+(0,q.zw)(e.rupiah(e.purchase.shipping)),1)])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[V])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Rp, "+(0,q.zw)(e.rupiah(e.purchase.total)),1)])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[D])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Rp, "+(0,q.zw)(e.rupiah(e.purchase.grandTotal)),1)])),_:1})])),_:1})])),_:1})}var Q=t(2273),x=t(7378),T=t(4561);const O=(0,l.aZ)({props:{purchase:{type:Object,required:!0}},components:{OrderStatusChip:T.Z},emits:["update"],setup(e,{emit:a}){return{rupiah:Q.z,displayDateTime:x.L}}});var C=t(7011),B=t(3414),H=t(2035);O.render=j;const A=O;W()(O,"components",{QList:C.Z,QItem:B.Z,QItemSection:H.Z});const z=(0,l.Wm)("div",{class:"q-pa-sm"},[(0,l.Wm)("h6",{class:"q-my-none"},"Edit Pembelian")],-1);function L(e,a,t,n,o,u){const r=(0,l.up)("q-separator"),d=(0,l.up)("q-card-section"),i=(0,l.up)("q-select"),s=(0,l.up)("q-input"),p=(0,l.up)("rupiah-input"),m=(0,l.up)("q-btn"),c=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(c,{flat:"",bordered:"",style:{width:"500px"}},{default:(0,l.w5)((()=>[z,(0,l.Wm)(r),"loading"==e.purchase.type?((0,l.wg)(),(0,l.j4)(d,{key:0})):((0,l.wg)(),(0,l.j4)(d,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{outlined:"",label:"Supplier",class:"q-mb-md","option-label":"name","option-value":"id","emit-value":"","display-value":e.selectedSupplier.name,options:e.suppliers,modelValue:e.payload.targetUserId,"onUpdate:modelValue":a[1]||(a[1]=a=>e.payload.targetUserId=a)},null,8,["display-value","options","modelValue"]),(0,l.Wm)(s,{outlined:"",label:"Pajak",class:"q-mb-md",modelValue:e.payload.tax,"onUpdate:modelValue":a[2]||(a[2]=a=>e.payload.tax=a),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"]),(0,l.Wm)(p,{label:"Biaya Pengiriman",modelValue:e.payload.shipping,"onUpdate:modelValue":a[3]||(a[3]=a=>e.payload.shipping=a)},null,8,["modelValue"]),(0,l.Wm)(s,{outlined:"",label:"Diskon",class:"q-mb-md",modelValue:e.payload.discount,"onUpdate:modelValue":a[4]||(a[4]=a=>e.payload.discount=a),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"]),(0,l.Wm)(m,{onClick:e.onSubmit,loading:e.loading,label:"Simpan",square:"",unelevated:"",dark:"",color:"primary"},null,8,["onClick","loading"])])),_:1}))])),_:1})}var R=t(8825),E=t(1768),M=function(e,a,t,l){function n(e){return e instanceof t?e:new t((function(a){a(e)}))}return new(t||(t=Promise))((function(t,o){function u(e){try{d(l.next(e))}catch(a){o(a)}}function r(e){try{d(l["throw"](e))}catch(a){o(a)}}function d(e){e.done?t(e.value):n(e.value).then(u,r)}d((l=l.apply(e,a||[])).next())}))};function $(e){const a=(0,R.Z)(),t=(0,y.iH)({type:"loading"}),l=()=>M(this,void 0,void 0,(function*(){const l=(0,y.SU)(e),n=`/v1/api/purchases/${l}`;t.value={type:"loading"};try{const e=yield E.api.get(n);return t.value={type:"data",item:e.data},t.value}catch(o){console.log(o),a.notify({type:"negative",message:"Gagal mengambil data pembelian"})}}));return{purchase:t,getPurchase:l}}var F=t(9582),J=function(e,a,t,l){function n(e){return e instanceof t?e:new t((function(a){a(e)}))}return new(t||(t=Promise))((function(t,o){function u(e){try{d(l.next(e))}catch(a){o(a)}}function r(e){try{d(l["throw"](e))}catch(a){o(a)}}function d(e){e.done?t(e.value):n(e.value).then(u,r)}d((l=l.apply(e,a||[])).next())}))};function G(){const e=(0,l.f3)("user"),a=(0,R.Z)(),t=(0,F.tv)(),n=(0,y.iH)(!1),o=(l,o)=>J(this,void 0,void 0,(function*(){if(n.value=!0,!e)throw new Error("user is undefined");const u=e.value.id,r=Object.assign(Object.assign({},o),{authorId:u}),d=`/v1/api/purchases/${l}/seal`;try{yield E.api.put(d,r),a.notify({type:"positive",message:"Pembelian berhasil dikunci"})}catch(i){console.log(i),a.notify({type:"negative",message:"Gagal mengunci pembelian"})}finally{n.value=!1,t.back()}}));return{seal:o,loading:n}}var N=function(e,a,t,l){function n(e){return e instanceof t?e:new t((function(a){a(e)}))}return new(t||(t=Promise))((function(t,o){function u(e){try{d(l.next(e))}catch(a){o(a)}}function r(e){try{d(l["throw"](e))}catch(a){o(a)}}function d(e){e.done?t(e.value):n(e.value).then(u,r)}d((l=l.apply(e,a||[])).next())}))};function K(){const e=(0,R.Z)(),a=((0,F.tv)(),(0,y.iH)(!1)),t=(t,l)=>N(this,void 0,void 0,(function*(){a.value=!0;const n=`/v1/api/purchases/${t}`;try{yield E.api.put(n,l),e.notify({type:"positive",message:"Pembelian berhasil diupdate"})}catch(o){console.log(o),e.notify({type:"negative",message:"Gagal mengunci diupdate"})}finally{a.value=!1}}));return{update:t,loading:a}}var Y=t(5222),X=t(3385);const ee=(0,l.aZ)({props:{orderId:{type:String,required:!0}},components:{RupiahInput:X.Z},emits:["purchase-updated"],setup(e,{emit:a}){const t=(0,y.Vh)(e,"orderId"),{purchase:n,getPurchase:o}=$(t),u=(0,y.qj)({targetUserId:0,tax:0,discount:0,shipping:"0"}),{suppliers:r,getSuppliers:d}=(0,Y.xT)(),i=(0,l.Fl)((()=>{const e=u.targetUserId,a=r.value.find((a=>a.id==e));return a||{name:"--"}}));(0,l.bv)((()=>{console.log("orderId = ",t.value),o().then((e=>{console.log(e.item),u.targetUserId=e.item.targetUserId,u.tax=e.item.tax,u.shipping=e.item.shipping,u.discount=e.item.discount})),d()}));const{update:s,loading:p}=K(),m=()=>{s(t.value,u).then((()=>{a("purchase-updated")}))};return{suppliers:r,payload:u,selectedSupplier:i,purchase:n,onSubmit:m,loading:p}}});var ae=t(151),te=t(5869),le=t(5589),ne=t(3314),oe=t(4842);ee.render=L;const ue=ee;W()(ee,"components",{QCard:ae.Z,QSeparator:te.Z,QCardSection:le.Z,QSelect:ne.Z,QInput:oe.Z,QBtn:w.Z});const re=(0,l.Wm)("div",{class:"q-pa-sm"},[(0,l.Wm)("h6",{class:"q-my-none"},"Kunci Pembelian")],-1),de={class:"text-weight-bold"};function ie(e,a,t,n,o,u){const r=(0,l.up)("q-separator"),d=(0,l.up)("q-card-section"),i=(0,l.up)("payment-method-options"),s=(0,l.up)("rupiah-input"),p=(0,l.up)("q-input"),m=(0,l.up)("q-btn"),c=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(c,{flat:"",bordered:"",style:{width:"500px"}},{default:(0,l.w5)((()=>[re,(0,l.Wm)(r),"loading"==e.purchase.type?((0,l.wg)(),(0,l.j4)(d,{key:0})):((0,l.wg)(),(0,l.j4)(d,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)("div",de," Pembelian #"+(0,q.zw)(e.purchase.item.id),1),(0,l.Wm)(i,{modelValue:e.payload.paymentMethod,"onUpdate:modelValue":a[1]||(a[1]=a=>e.payload.paymentMethod=a)},null,8,["modelValue"]),(0,l.Wm)(s,{label:"Total Bayar",modelValue:e.payload.nominal,"onUpdate:modelValue":a[2]||(a[2]=a=>e.payload.nominal=a)},null,8,["modelValue"]),e.needDelay?((0,l.wg)(),(0,l.j4)(l.HY,{key:0},[(0,l.Wm)(s,{label:"Total Hutang",readonly:"","model-value":e.debt.toString()},null,8,["model-value"]),(0,l.Wm)(p,{class:"q-mb-md",outlined:"",label:"Batas Waktu Pembayaran Hutang",type:"number",modelValue:e.payload.elapsedDelay,"onUpdate:modelValue":a[3]||(a[3]=a=>e.payload.elapsedDelay=a),modelModifiers:{number:!0},min:"0"},null,8,["modelValue"])],64)):(0,l.kq)("",!0),(0,l.Wm)(m,{onClick:e.onSubmit,loading:e.sealLoading,label:"simpan",unelevated:"",color:"blue",dark:""},null,8,["onClick","loading"])])),_:1})),(0,l.Wm)(r)])),_:1})}var se=t(6635),pe=t(5387),me=t.n(pe),ce=t(891),fe=t(6729),ye=function(e,a){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)a.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(t[l[n]]=e[l[n]])}return t};const ge=(0,l.aZ)({components:{RupiahInput:X.Z,PaymentMethodOptions:fe.Z},emits:["purchase-sealed"],setup(e,{emit:a}){const t=(0,l.f3)("purchase"),n=(0,y.qj)({nominal:"0",status:ce.LN.SUCCESS,paymentMethod:ce.XL.CASH,elapsedDelay:30}),o=(0,l.Fl)((()=>{const e=(0,y.SU)(t);if("data"!=e.type)return new(me())("0");n.nominal;const a=new(me())(n.nominal),l=new(me())(e.item.grandTotal),o=l.sub(a);return o})),u=(0,l.Fl)((()=>o.value.greaterThan(0))),{seal:r,loading:d}=G(),i=()=>{const{elapsedDelay:e}=n,l=ye(n,["elapsedDelay"]);let o=Object.assign({},l);u.value&&(o.delay={dueDate:(0,se.Z)(new Date,e)}),r(t.value.item.id,o).then((()=>{a("purchase-sealed")}))};return(0,l.bv)((()=>{n.nominal=t.value.item.grandTotal})),{purchase:t,payload:n,PAYMENT_METHOD_OPTIONS:ce.x$,debt:o,needDelay:u,onSubmit:i,sealLoading:d}}});ge.render=ie;const he=ge;W()(ge,"components",{QCard:ae.Z,QSeparator:te.Z,QCardSection:le.Z,QInput:oe.Z,QBtn:w.Z});const we=(0,l.Uk)("Daftar Item"),be={class:"q-px-lg"};function We(e,a,t,n,o,u){const r=(0,l.up)("q-toolbar-title"),d=(0,l.up)("q-btn"),i=(0,l.up)("q-toolbar"),s=(0,l.up)("q-separator"),p=(0,l.up)("stock-item-table"),m=(0,l.up)("pagination"),c=(0,l.up)("q-card"),f=(0,l.up)("stock-item-add"),y=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)("div",null,[(0,l.Wm)(c,{bordered:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-subtitle1 text-weight-bold"},{default:(0,l.w5)((()=>[we])),_:1}),e.open?((0,l.wg)(),(0,l.j4)(d,{key:0,onClick:a[1]||(a[1]=a=>e.showAddDialog=!0),icon:"add",label:"tambah item",outline:""})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(s),(0,l.Wm)(p,{onDelete:e.onItemDelete,open:e.open,stockItems:e.stockItems.items},null,8,["onDelete","open","stockItems"]),(0,l.Wm)("section",be,[(0,l.Wm)(i,{class:"text-grey-8 q-py-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{page:e.params.page,"onUpdate:page":a[2]||(a[2]=a=>e.params.page=a),"per-page":e.params.perPage,"onUpdate:per-page":a[3]||(a[3]=a=>e.params.perPage=a),"total-page":e.stockItems.totalPage},null,8,["page","per-page","total-page"])])),_:1})])])),_:1}),(0,l.Wm)(y,{modelValue:e.showAddDialog,"onUpdate:modelValue":a[4]||(a[4]=a=>e.showAddDialog=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{onItemAdded:e.onItemAdded,"order-id":e.orderId,style:{width:"500px"}},null,8,["onItemAdded","order-id"])])),_:1},8,["modelValue"])])}var ve=t(4964),ke=t(7179);const qe={class:"text-weight-bold"};function _e(e,a,t,n,o,u){const r=(0,l.up)("router-link"),d=(0,l.up)("q-td"),i=(0,l.up)("q-btn"),s=(0,l.up)("q-table");return(0,l.wg)(),(0,l.j4)(s,{flat:"","hide-pagination":"",columns:e.columns,rows:e.stockItems,"rows-per-page-options":[0]},{"body-cell-product":(0,l.w5)((e=>[(0,l.Wm)(d,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{to:`/app/product/${e.row.product.id}/detail`},{default:(0,l.w5)((()=>[(0,l.Wm)("div",qe,(0,q.zw)(e.row.product.name),1)])),_:2},1032,["to"])])),_:2},1032,["props"])])),"body-cell-actions":(0,l.w5)((a=>[(0,l.Wm)(d,{props:a},{default:(0,l.w5)((()=>[e.open?((0,l.wg)(),(0,l.j4)(i,{key:0,icon:"delete",onClick:t=>e.$emit("delete",a.row.id),color:"red",flat:"",size:"sm"},null,8,["onClick"])):(0,l.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["columns","rows"])}var Ie=t(6106);const Ze=(0,l.aZ)({props:{open:{type:Boolean,required:!0},stockItems:{type:Array,required:!0}},emits:["update","delete","deleted","item-added"],setup(e,{emit:a}){return{columns:Ie.L}}});var Ue=t(6429),Pe=t(3884);Ze.render=_e;const Se=Ze;W()(Ze,"components",{QTable:Ue.Z,QTd:Pe.Z,QBtn:w.Z});const Ve=(0,l.Uk)(" Tambah Data Item ");function De(e,a,t,n,o,u){const r=(0,l.up)("q-toolbar-title"),d=(0,l.up)("q-toolbar"),i=(0,l.up)("product-search-input"),s=(0,l.up)("rupiah-input"),p=(0,l.up)("q-input"),m=(0,l.up)("q-form"),c=(0,l.up)("q-card-section"),f=(0,l.up)("q-btn"),y=(0,l.up)("q-card-actions"),g=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(g,{flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Ve])),_:1})])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{ref:"form"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:e.payload.product,"onUpdate:modelValue":a[1]||(a[1]=a=>e.payload.product=a),rules:[e=>!!e||"Produk Harus Diisi"]},null,8,["modelValue","rules"]),(0,l.Wm)(s,{label:"Harga Beli",modelValue:e.payload.buyPrice,"onUpdate:modelValue":a[2]||(a[2]=a=>e.payload.buyPrice=a),rules:[e.decGreaterThan("0","Harga Beli harus lebih besar dari 0")]},null,8,["modelValue","rules"]),(0,l.Wm)(s,{label:"Harga Jual",modelValue:e.payload.sellPrice,"onUpdate:modelValue":a[3]||(a[3]=a=>e.payload.sellPrice=a),rules:[e.decGreaterThan("0","Harga Jual harus lebih besar dari 0")]},null,8,["modelValue","rules"]),(0,l.Wm)(p,{filled:"",class:"q-mb-md",label:"Jumlah Item Baik",modelValue:e.payload.available,"onUpdate:modelValue":a[4]||(a[4]=a=>e.payload.available=a),modelModifiers:{number:!0},type:"number",rules:[e=>!!e||"Jumlah Item Baik Harus Diisi"]},null,8,["modelValue","rules"]),(0,l.Wm)(p,{class:"q-mb-md",label:"Jumlah Item Rusak",modelValue:e.payload.defect,"onUpdate:modelValue":a[5]||(a[5]=a=>e.payload.defect=a),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"]),(0,l.Wm)(p,{class:"q-mb-md",label:"Diskon",type:"number",min:"0",max:"100",modelValue:e.payload.discount,"onUpdate:modelValue":a[6]||(a[6]=a=>e.payload.discount=a),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},512)])),_:1}),(0,l.Wm)(y,{align:"center",class:"bg-grey-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{onClick:e.onSubmit,label:"Simpan",color:"primary",unelevated:"",dark:""},null,8,["onClick"])])),_:1})])),_:1})}var je=t(3358),Qe=t(2386),xe=function(e,a,t,l){function n(e){return e instanceof t?e:new t((function(a){a(e)}))}return new(t||(t=Promise))((function(t,o){function u(e){try{d(l.next(e))}catch(a){o(a)}}function r(e){try{d(l["throw"](e))}catch(a){o(a)}}function d(e){e.done?t(e.value):n(e.value).then(u,r)}d((l=l.apply(e,a||[])).next())}))},Te=function(e,a){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)a.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(t[l[n]]=e[l[n]])}return t};const Oe=(0,l.aZ)({props:{orderId:{type:[Number,String],required:!0}},components:{ProductSearchInput:je.Z,RupiahInput:X.Z},emits:["item-added"],setup(e,{emit:a}){const t=(0,y.iH)(),n=(0,y.qj)({orderId:0,product:{},buyPrice:"0",sellPrice:"0",quantity:0,available:0,defect:0}),o=(0,l.f3)("user"),{result:u,createEntity:r}=(0,ve.Zh)({entityName:"Item Pembelian",transform:a=>{const t=(0,y.SU)(o);if(!t)throw new Error("user is undefined");const{product:l}=a,n=Te(a,["product"]),u=n.available+n.defect;return Object.assign(Object.assign({},n),{productId:l.id,quantity:u,orderId:e.orderId,authorId:t.id})}}),d=()=>xe(this,void 0,void 0,(function*(){const e="/v1/api/stock-items",l=(0,y.SU)(t),o=yield l.validate(!0);if(o)try{yield r(e,n),a("item-added")}catch(u){console.log(u)}}));return{form:t,payload:n,result:u,decGreaterThan:Qe.b,onSubmit:d}}});var Ce=t(9570),Be=t(3747),He=t(5269),Ae=t(9367);Oe.render=De;const ze=Oe;W()(Oe,"components",{QCard:ae.Z,QToolbar:Ce.Z,QToolbarTitle:Be.Z,QCardSection:le.Z,QForm:He.Z,QInput:oe.Z,QCardActions:Ae.Z,QBtn:w.Z});const Le=(0,l.aZ)({props:{orderId:{type:[Number,String],required:!0},open:{type:Boolean,required:!0}},components:{StockItemTable:Se,StockItemAdd:ze,Pagination:ke.Z},emits:["item-added","item-deleted"],setup(e,{emit:a}){(0,y.Vh)(e,"orderId");const{params:t,getEntities:n,result:o}=(0,ve.IT)({url:"/v1/api/stock-items",name:"Item Pembelian",initialParams:{target:0,type:"ORDER"}}),{promptRemove:u}=(0,ve.dK)("Item Penjualan");(0,l.bv)((()=>{t.target=e.orderId}));const r=(0,y.iH)(!1);function d(){a("item-added"),n()}function i(e){console.log("id = ",e);const t=`/v1/api/stock-items/${e}`;u(t,e).then((()=>{a("item-deleted")}))}return{foo:"bar",stockItems:o,params:t,showAddDialog:r,onItemAdded:d,onItemDelete:i}}});var Re=t(6778);Le.render=We;const Ee=Le;W()(Le,"components",{QCard:ae.Z,QToolbar:Ce.Z,QToolbarTitle:Be.Z,QBtn:w.Z,QSeparator:te.Z,QDialog:Re.Z});const Me=(0,l.Uk)("Tanggal Jatuh Tempo"),$e=(0,l.Uk)("Total"),Fe=(0,l.Uk)("Status");function Je(e,a,t,n,o,u){const r=(0,l.up)("q-item-label"),d=(0,l.up)("q-item-section"),i=(0,l.up)("q-item"),s=(0,l.up)("delay-status-chip"),p=(0,l.up)("q-btn"),m=(0,l.up)("q-list");return(0,l.wg)(),(0,l.j4)(m,{separator:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Me])),_:1})])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,q.zw)(e.formatDateTime(e.delay.dueDate)),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[$e])),_:1})])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)("IDR "+(0,q.zw)(e.rupiah(e.delay.total)),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Fe])),_:1})])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)("div",null,[(0,l.Wm)(s,{complete:e.delay.complete},null,8,["complete"])])])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{label:"detail",to:`/app/delay-payable/${e.delay.id}/detail`,outline:""},null,8,["to"])])),_:1})])),_:1})])),_:1})}var Ge=t(2476);function Ne(e,a,t,n,o,u){const r=(0,l.up)("q-chip");return(0,l.wg)(),(0,l.j4)(r,{outline:"",color:e.data.color,class:"text-weight-bold text-uppercase"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,q.zw)(e.data.message),1)])),_:1},8,["color"])}const Ke=(0,l.aZ)({props:{complete:{type:Boolean,required:!0}},setup(e){const a=(0,l.Fl)((()=>{const a=e.complete?"positive":"negative",t=e.complete?"Lunas":"Belum Lunas";return{color:a,message:t}}));return{data:a}}});var Ye=t(7030);Ke.render=Ne;const Xe=Ke;W()(Ke,"components",{QChip:Ye.Z});const ea=(0,l.aZ)({props:{delay:{type:Object,required:!0}},components:{DelayStatusChip:Xe},setup(e){return{formatDateTime:Ge.o,rupiah:Q.z}}});var aa=t(2350);ea.render=Je;const ta=ea;W()(ea,"components",{QList:C.Z,QItem:B.Z,QItemSection:H.Z,QItemLabel:aa.Z,QBtn:w.Z});var la=t(4465);const na=(0,l.aZ)({components:{BtnActions:v,PageToolbar:k.Z,PurchaseCardInfo:A,PurchaseUpdate:ue,StockItems:Ee,PurchaseSeal:he,DelayFlash:ta,TransactionFlash:la.Z},props:{orderId:{type:String,required:!0}},setup(e,{emit:a}){const t=(0,y.Vh)(e,"orderId"),{purchase:n,getPurchase:o}=$(t);(0,l.JJ)("purchase",n);const u=(0,l.Fl)((()=>{const e=(0,y.SU)(n);if("data"!=e.type)return!1;const a="OPEN"==e.item.orderStatus;return a})),r=(0,F.yj)(),d=(0,l.Fl)((()=>r.fullPath+"/update")),i=(0,l.Fl)((()=>r.fullPath+"/seal")),s=(0,y.iH)(!1),p=(0,y.iH)(!1);return(0,l.bv)(o),{purchase:n,open:u,sealURL:i,updateURL:d,getPurchase:o,showSealDialog:s,showUpdateDialog:p}}});var oa=t(4379);na.render=f;const ua=na;W()(na,"components",{QPage:oa.Z,QCard:ae.Z,QToolbar:Ce.Z,QSeparator:te.Z,QDialog:Re.Z})}}]);